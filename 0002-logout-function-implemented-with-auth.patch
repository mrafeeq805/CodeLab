From 640a1e187aea442ede6ca4f77203270e966d2775 Mon Sep 17 00:00:00 2001
From: mrafeeqvr <muhammedrafeeq805@gmail.com>
Date: Sat, 2 Mar 2024 10:54:03 +0530
Subject: [PATCH 2/2] logout function implemented with auth

---
 Client/src/App.js                        | 24 +++++++++++++++++++++++-
 Client/src/components/ProfileMenuCard.js | 18 +++++++++++++++++-
 2 files changed, 40 insertions(+), 2 deletions(-)

diff --git a/Client/src/App.js b/Client/src/App.js
index 271eb3c..f483d5b 100644
--- a/Client/src/App.js
+++ b/Client/src/App.js
@@ -1,5 +1,5 @@
 
-import { RouterProvider, createBrowserRouter } from 'react-router-dom';
+import { RouterProvider, createBrowserRouter, useNavigate } from 'react-router-dom';
 import Home from './components/Home';
 import Categories from './components/Categories';
 import MyProjects from './components/MyProjects';
@@ -15,8 +15,30 @@ import Profile from './components/Profile';
 import EditProfile from './components/EditProfie';
 import DeveloperPage from './components/DeveloperPage';
 import AddProjectPage from './components/AddProjectPage';
+import { useEffect } from 'react';
+import { onAuthStateChanged } from "firebase/auth";
+import { auth } from "./utils/firebase";
+import { useDispatch } from 'react-redux';
+import { addUser, removeUser } from './utils/userSlice';
 
 function App() {
+
+  const dispatch = useDispatch()
+  useEffect(() => {
+		const unsubscribe = onAuthStateChanged(auth, (user) => {
+			if (user) {
+				const { uid, email, displayName, photoURL } = user;
+				dispatch(
+					addUser(user)
+				);
+        		
+			} else {
+				dispatch(removeUser());
+        		
+			}
+		});
+    return () => unsubscribe()
+	}, []);
   const router = createBrowserRouter([
     {
       path : '/',
diff --git a/Client/src/components/ProfileMenuCard.js b/Client/src/components/ProfileMenuCard.js
index 61239d1..322a70a 100644
--- a/Client/src/components/ProfileMenuCard.js
+++ b/Client/src/components/ProfileMenuCard.js
@@ -1,8 +1,24 @@
 import React from 'react'
+import { signOut } from "firebase/auth";
+import { auth } from '../utils/firebase';
+import { useDispatch } from 'react-redux';
+import { removeUser } from '../utils/userSlice';
 
 const ProfileMenuCard = ({icon,title}) => {
+  const dispatch = useDispatch()
+  const handleLogout = () =>{
+    signOut(auth).then(() => {
+      dispatch(removeUser())
+      console.log("logot successfully");
+    }).catch((error) => {
+      console.log(error);
+    });
+  }
+  const handlePages = () =>{
+    
+  }
   return (
-    <div className='flex items-center gap-8'>
+    <div onClick={title === 'Logout' ? handleLogout : handlePages} className='flex items-center gap-8'>
         <div className=' rounded-full bg-light h-12 w-12 flex justify-center items-center'>
             <i className={" text-primary text-xl "+icon}></i>
         </div>
-- 
2.42.0.windows.2

